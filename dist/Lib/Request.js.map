{"version":3,"sources":["../../src/Lib/Request.js"],"names":["superagentPromise","_superagent","TextEncoder","Utils","AuthStore","superagent","global","Promise","base64js","require","Base64Encode","str","encoding","bytes","encode","fromByteArray","handleErrors","err","res","errorText","errorStatus","message","status","response","body","error","Alert","position","title","Translate","statusText","level","autoDismiss","url","indexOf","logout","then","window","location","responseBody","tokenPlugin","req","set","localStorage","getItem","basic","Request","timeout","deadline","del","API_ROOT_URL","use","on","end","get","params","fullUrl","startsWith","query","put","post","type","postMultiPart","postForm","postJson","r","Object","keys","forEach","key","File","attach","console","debug","field","retry"],"mappings":"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","sourcesContent":["/*\r\n *  Copyright (c) 2019. Crypttech Yazılım\r\n *  Author: Cihan Öztürk\r\n *  Email: cihanozturk@crypttech.com\r\n *\r\n *\r\n */\r\n\r\nimport superagentPromise from \"superagent-promise\";\r\nimport _superagent from \"superagent\";\r\nimport {TextEncoder} from \"text-encoding\";\r\nimport Utils from \"./CAP/Utils/Utils\";\r\nimport AuthStore from \"../Store/CapAuthStore\";\r\n\r\n\r\nconst superagent = superagentPromise(_superagent, global.Promise);\r\n\r\n\r\nvar base64js = require(\"base64-js\");\r\n\r\n\r\nfunction Base64Encode(str, encoding = \"utf-8\") {\r\n    var bytes = new (TextEncoder)(encoding).encode(str);\r\n    return base64js.fromByteArray(bytes);\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param err\r\n * @returns {*}\r\n */\r\nconst handleErrors = (err, res) => {\r\n\r\n\r\n    // console.debug(\"Request Result\",res )\r\n    // console.debug(\"Request Error\", err )\r\n\r\n\r\n    let errorText = \"\";\r\n    let errorStatus = null;\r\n    if (err) {\r\n        errorText = err.message;\r\n        errorStatus = err.status;\r\n        if (err.response.body && err.response.body.message) {\r\n            errorText += \" İstek Sonucu :\" + err.response.body.message;\r\n        }\r\n\r\n        if (err.response.error.message) {\r\n            errorText += \" Sistem Mesajı :\" + err.response.error.message;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    if (res && res.status === 504) {\r\n        Utils.Alert({\r\n            position: \"tc\",\r\n            title: Utils.Translate(\"İstek gerçekleştirilemedi\"),\r\n            message: Utils.Translate(res.statusText),\r\n            level: \"error\",\r\n            autoDismiss: 5\r\n        });\r\n\r\n        if( res.error.url.indexOf(\"/securityService/\")!=-1){\r\n            AuthStore.logout()\r\n                .then(() => {\r\n                        window.location = \"/#/login\";\r\n                        //window.location.reload();\r\n                    }\r\n                );\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Yetkisiz giriş hatası\r\n     */\r\n\r\n    if (\r\n        (res && res.status != 200) //status 200 değil se\r\n        &&\r\n        (\r\n            (res && res.status === 401)  //response dönmüş ve kodu 401 ise\r\n            ||\r\n            (err && err.status == 401) //bir hata dönmüş ve kodu 401 ise\r\n        )\r\n\r\n    ) {\r\n        AuthStore.logout()\r\n            .then(() => {\r\n                    window.location = \"/#/login\";\r\n                    //window.location.reload();\r\n                }\r\n            );\r\n    }\r\n\r\n\r\n\r\n\r\n    /**\r\n     * Endpoint bulunamadı\r\n     */\r\n    if (res && res.status === 404) {\r\n        Utils.Alert({\r\n            position: \"tc\",\r\n            title: Utils.Translate(\"İstek gerçekleştirilemedi\"),\r\n            message: Utils.Translate(res.statusText),\r\n            level: \"error\",\r\n            autoDismiss: 5\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * Servis tarafında bir hata oluştur\r\n     */\r\n    if (errorStatus == null && res && res.status === 500) {\r\n        Utils.Alert({\r\n            position: \"tc\",\r\n            title: Utils.Translate(\"Hata oluştu\"),\r\n            message: Utils.Translate(\"Gerekli moduller yüklenemedi. Lütfen tekrar deneyiniz. :errorText\", {errorText: errorText}),\r\n            level: \"error\",\r\n            autoDismiss: 5\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * İstek sırasında bir hata oluştu\r\n     */\r\n\r\n    if (err) {\r\n\r\n        Utils.Alert({\r\n            position: \"tc\",\r\n            title: Utils.Translate(\"Hata oluştu\"),\r\n            message: Utils.Translate(\"İşlem sırasında hata oluştu. Lütfen tekrar deneyiniz.:errorText\", {errorText: errorText}),\r\n            level: \"error\",\r\n            autoDismiss: 5\r\n        });\r\n    }\r\n\r\n    if (res && res.status === 502) {\r\n        Utils.Alert({\r\n            position: \"tc\",\r\n            title: Utils.Translate(\"Hata oluştu\"),\r\n            message: Utils.Translate(\"Gerekli moduller yüklenemedi. Lütfen tekrar deneyiniz.\"),\r\n            level: \"error\",\r\n            autoDismiss: 5\r\n        });\r\n    }\r\n\r\n    if (res && res.status === 504) {\r\n        Utils.Alert({\r\n            position: \"tc\",\r\n            title: Utils.Translate(\"Hata oluştu\"),\r\n            message: Utils.Translate(res.statusText),\r\n            level: \"error\"\r\n\r\n        });\r\n    }\r\n\r\n    return err;\r\n};\r\n/**\r\n *\r\n * @param res\r\n * @returns {*}\r\n */\r\nconst responseBody = res => {\r\n    return res.body;\r\n};\r\n/**\r\n *\r\n * @param req\r\n */\r\nconst tokenPlugin = req => {\r\n\r\n    req.set(\"Access-Control-Allow-Origin\", \"*\");\r\n    if (window.localStorage.getItem(\"accessToken\")) {\r\n        var basic = Base64Encode(window.localStorage.getItem(\"accessToken\") + \":\");\r\n        //req.set('authorization', `Token ${CommonStore.token}`);\r\n        req.set(\"Authorization\", `Basic ${basic}`);\r\n    }\r\n};\r\n\r\n\r\nconst Request = {\r\n    timeout: 30000,\r\n    deadline: 60000,\r\n    del: url =>\r\n        superagent\r\n            .del(`${API_ROOT_URL}${url}`)\r\n            .use(tokenPlugin)\r\n            .on(\"error\", handleErrors)\r\n            .end(handleErrors)\r\n            .then(responseBody),\r\n    get: (url, params = {}) => {\r\n\r\n        var fullUrl = `${API_ROOT_URL}${url}`;\r\n        if (url.startsWith(\"http://\") || url.startsWith(\"https://\") || url.startsWith(\"//\")) {\r\n            fullUrl = url;\r\n        }\r\n\r\n\r\n        return superagent\r\n            .get(`${fullUrl}`)\r\n            .query(params)\r\n            .use(tokenPlugin)\r\n            .end(handleErrors)\r\n            .then(responseBody);\r\n    },\r\n    put: (url, body) =>\r\n        superagent\r\n            .put(`${API_ROOT_URL}${url}`, body)\r\n            .use(tokenPlugin)\r\n            .on(\"error\", handleErrors)\r\n            .end(handleErrors)\r\n            .then(responseBody),\r\n    post: (url, body, type = 'post') => {\r\n\r\n\r\n        if (type == 'multipart') {\r\n            return Request.postMultiPart(url, body);\r\n        } else if (type == 'formdata') {\r\n            return Request.postForm(url, body);\r\n        } else {\r\n            return Request.postJson(url, body);\r\n        }\r\n\r\n    },\r\n\r\n    postJson: (url, body) => {\r\n        var fullUrl = `${API_ROOT_URL}${url}`;\r\n        if (url.startsWith(\"http://\") && url.startsWith(\"https://\")) {\r\n            fullUrl = url;\r\n        }\r\n\r\n\r\n        return superagent.post(fullUrl, body)\r\n            .use(tokenPlugin)\r\n            .on(\"error\", handleErrors)\r\n            .end(handleErrors)\r\n            .then(responseBody);\r\n    },\r\n    postForm: (url, body) => {\r\n\r\n        var fullUrl = `${API_ROOT_URL}${url}`;\r\n        if (url.startsWith(\"http://\") && url.startsWith(\"https://\")) {\r\n            fullUrl = url;\r\n        }\r\n\r\n        return superagent.post(fullUrl, body)\r\n            .type(\"form\")\r\n            .use(tokenPlugin)\r\n            .on(\"error\", handleErrors)\r\n            .end(handleErrors)\r\n            .then(responseBody);\r\n\r\n\r\n    },\r\n\r\n    postMultiPart: (url, body) => {\r\n        var r = superagent.post(`${API_ROOT_URL}${url}`);\r\n\r\n        Object.keys(body).forEach(function (key) {\r\n            if ((body[key] instanceof File)) {\r\n                r.attach(key, body[key]);\r\n                console.debug(\"Attach file\", body[key])\r\n            } else {\r\n                r.field(key, body[key]);\r\n            }\r\n\r\n        });\r\n        //r.withCredentials();\r\n        r.retry(0); // or:\r\n        r.use(tokenPlugin);\r\n        r.on(\"error\", handleErrors);\r\n        return r.then(responseBody);\r\n\r\n    }\r\n};\r\n\r\nexport default Request\r\n"],"file":"Request.js"}