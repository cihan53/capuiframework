{"version":3,"sources":["../../../../src/Lib/CAP/Grid/ContextMenu.js"],"names":["React","Utils","ContextMenu","state","visible","_handleContextMenu","event","field","data","preventDefault","setState","target","clickX","clientX","clickY","clientY","screenW","window","innerWidth","screenH","innerHeight","rootW","root","offsetWidth","rootH","offsetHeight","right","left","top","bottom","style","_handleClick","wasOutside","contains","_handleScroll","show","document","getElementById","props","container","addEventListener","nextProps","nextState","removeEventListener","type","clickItem","disabled","isEmpty","ref","__t","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Utils from \"../Utils/Utils\";\r\n\r\nexport default class ContextMenu extends React.Component {\r\n    state = {\r\n        visible: false\r\n    };\r\n\r\n\r\n    componentDidMount() {\r\n        // document.addEventListener(\"contextmenu\", this._handleContextMenu);\r\n\r\n\r\n        if (document.getElementById(this.props.container)) {\r\n\r\n            document.getElementById(this.props.container).addEventListener(\"click\", this._handleClick);\r\n            document.getElementById(this.props.container).addEventListener(\"scroll\", this._handleScroll);\r\n        }\r\n    };\r\n\r\n\r\n    componentWillUpdate(nextProps, nextState) {\r\n        if (document.getElementById(this.props.container)) {\r\n            document.getElementById(this.props.container).addEventListener(\"click\", this._handleClick);\r\n            document.getElementById(this.props.container).addEventListener(\"scroll\", this._handleScroll);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // document.removeEventListener(\"contextmenu\", this._handleContextMenu);\r\n\r\n        if (document.getElementById(this.props.container)) {\r\n            document.getElementById(this.props.container).removeEventListener(\"click\", this._handleClick);\r\n            document.getElementById(this.props.container).removeEventListener(\"scroll\", this._handleScroll);\r\n        }\r\n    }\r\n\r\n    _handleContextMenu = (event, field = null, data = null) => {\r\n        event.preventDefault();\r\n\r\n        this.setState({visible: true, field: field, target: data});\r\n\r\n\r\n        const clickX = event.clientX;\r\n        const clickY = event.clientY;\r\n        const screenW = window.innerWidth;\r\n        const screenH = window.innerHeight;\r\n        const rootW = this.root.offsetWidth;\r\n        const rootH = this.root.offsetHeight;\r\n\r\n        const right = (screenW - clickX) > rootW;\r\n        const left = !right;\r\n        const top = (screenH - clickY) > rootH;\r\n        const bottom = !top;\r\n\r\n        if (right) {\r\n            this.root.style.left = `${clickX + 5}px`;\r\n        }\r\n\r\n        if (left) {\r\n            this.root.style.left = `${clickX - rootW - 5}px`;\r\n        }\r\n\r\n        if (top) {\r\n            this.root.style.top = `${clickY + 5}px`;\r\n        }\r\n\r\n        if (bottom) {\r\n            this.root.style.top = `${clickY - rootH - 5}px`;\r\n        }\r\n    };\r\n\r\n    _handleClick = (event) => {\r\n        const {visible} = this.state;\r\n        const wasOutside = !(event.target.contains === this.root);\r\n\r\n        if (wasOutside && visible) {\r\n            this.setState({visible: false});\r\n        }\r\n    };\r\n\r\n    _handleScroll = () => {\r\n        const {visible} = this.state;\r\n\r\n        if (visible) this.setState({visible: false});\r\n    };\r\n\r\n    show = (event, field, data) => {\r\n        //this.setState({visible:visible});\r\n        this._handleContextMenu(event, field, data);\r\n    };\r\n\r\n    clickItem(type, event) {\r\n        this.props.clickItem(type, this.state);\r\n        if (this.state.visible) this.setState({visible: false});\r\n    }\r\n\r\n    render() {\r\n        const {visible} = this.state;\r\n\r\n        let disabled = \" contextMenu--option__disabled\";\r\n        if (!Utils.isEmpty(this.state.target)) {\r\n            disabled = \"\";\r\n        }\r\n\r\n        return <React.Fragment>\r\n            <div style={{\"display\": visible ? \"block\" : \"none\"}} ref={ref => {\r\n                this.root = ref;\r\n            }} className=\"contextMenu\">\r\n                <div className=\"contextMenu--label\">\r\n                    {Utils.__t(\"Filtre: ':data'\", {data: this.state.target})}\r\n                </div>\r\n                <div className=\"contextMenu--separator\"/>\r\n                <div\r\n                    className=\"contextMenu--option\"\r\n                    onClick={event => this.clickItem(\"eq\", event)}\r\n                >\r\n                    {Utils.__t(\"Eşit (=':data')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className=\"contextMenu--option\"\r\n                    onClick={event => this.clickItem(\"noteq\", event)}\r\n                >\r\n                    {Utils.__t(\"Eşit Değil (!=':data')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className=\"contextMenu--option\"\r\n                    onClick={event => this.clickItem(\"startWith\", event)}\r\n                >\r\n                    {Utils.__t(\"Başlayan (like '%:data')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className=\"contextMenu--option\"\r\n                    onClick={event => this.clickItem(\"endWith\", event)}\r\n                >\r\n                    {Utils.__t(\"Biten (like ':data%')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className=\"contextMenu--option\"\r\n                    onClick={event => this.clickItem(\"contains\", event)}\r\n                >\r\n                    {Utils.__t(\"İçeren (like '%:data%')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className=\"contextMenu--option\"\r\n                    onClick={event => this.clickItem(\"not-contains\", event)}\r\n                >\r\n                    {Utils.__t(\"İçermeyen (not like '%:data%')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className={\"contextMenu--option\" + disabled}\r\n                    onClick={event => this.clickItem(\"gt\", event)}\r\n                >\r\n                    {Utils.__t(\"Büyük (> ':data')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className={\"contextMenu--option\" + disabled}\r\n                    onClick={event => this.clickItem(\"gte\", event)}\r\n                >\r\n                    {Utils.__t(\"Büyük Eşit (>= ':data')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className={\"contextMenu--option\" + disabled}\r\n                    onClick={event => this.clickItem(\"lt\", event)}\r\n                >\r\n                    {Utils.__t(\"Küçük (< ':data')\", {data: this.state.target})}\r\n                </div>\r\n                <div\r\n                    className={\"contextMenu--option\" + disabled}\r\n                    onClick={event => this.clickItem(\"lte\", event)}\r\n                >\r\n                    {Utils.__t(\"Küçük Eşit (<= ':data')\", {data: this.state.target})}\r\n                </div>\r\n                {/*<div className=\"contextMenu--option contextMenu--option__disabled\">View full version</div>*/}\r\n                {/*<div className=\"contextMenu--option\">About this app</div>*/}\r\n            </div>\r\n        </React.Fragment>;\r\n    };\r\n}"],"file":"ContextMenu.js"}