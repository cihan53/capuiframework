var _class,_temp;function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:_assertThisInitialized(a)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}import React from"react";import{observer}from"mobx-react/index";import PropTypes from"prop-types";import{Col,FormFeedback,FormGroup,Input,Label,FormText}from"reactstrap";import Field from"./Field";import Utils from"../Utils/Utils";import StoreManager from"../../StoreManager";let ComboBox=observer(_class=(_temp=function(a){function b(a){var c;return _classCallCheck(this,b),c=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a)),c.autoload=!0,c.data=[],c.store=null,c.key=c.props.key||Utils.ShortId.generate(),c.generateItems=c.generateItems.bind(_assertThisInitialized(c)),c.init(),c}return _inherits(b,a),_createClass(b,[{key:"init",value:function init(){if(this.props.store){if("string"==typeof this.props.store)this.store=StoreManager.get(this.props.store)||null;else{let a=this.props.store.name,b=this.props.store.baseParams||null,c=this.props.store.defaultSort||null;this.store=StoreManager.get(a)||null,this.store&&b&&this.store.setParameters(b),this.store&&c&&this.store.setDefaultSortDir(c.dir,c.sort)}if(!this.store)throw new Error(Utils.__t("Data Store Tan\u0131ms\u0131z"));this.autoload=!this.props.hasOwnProperty("autoload")||this.props.autoload}}},{key:"componentWillMount",value:function componentWillMount(){this.store&&this.autoload&&this.store.load({page:0,start:0,size:this.limit})}},{key:"onChange",value:function onChange(a){if(this.store.Attributes.hasOwnProperty(a.target.name))this.isValid(a.target.name,a.target.value)||this.store.setAttr(a.target.name,a.target.value);else throw Utils.Translate("Tan\u0131mlanmam\u0131\u015F alan ad\u0131")}},{key:"generateItems",value:function generateItems(a){return this.store?a.map((a,b)=>React.createElement("option",{key:this.key+"-combobox-item-"+b,value:a[this.props.valueField]},a[this.props.displayField])):a.map((a,b)=>React.createElement("option",{key:this.key+"-combobox-item-"+b,value:a.value},a.name))}},{key:"render",value:function render(){let a=!1,b=!1,c=this.props,d=this.state.error;c.allowBlank&&(a=!1,b=!1);let e=null,f=this.generateItems(this.store?this.store.data:c.items);return e=null==c.store?React.createElement(Input,{defaultValue:c.defaultValue,valid:a,invalid:b,type:"select",default:!0,name:c.inputName,id:c.id||this.key,placeholder:c.placeholder},f):React.createElement(Input,{defaultValue:c.defaultValue||"",valid:a,invalid:b,type:"select",default:!0,name:c.inputName,id:c.id||c.inputName+"-form-field",value:this.store.Attributes[c.valueField],placeholder:c.placeholder,onChange:this.onChange},f),"row"==c.layout&&(e=React.createElement(Col,{sm:c.options.col},e)),React.createElement(FormGroup,{row:"row"==c.layout},c.label&&"row"!=c.layout?React.createElement(Label,{htmlFor:c.id||c.inputName+"-form-field"},c.label):"",c.label&&"row"==c.layout?React.createElement(Label,{htmlFor:c.id||c.inputName+"-form-field",sm:c.options.labelCol},c.label):"",e,d?React.createElement(FormFeedback,{valid:!0,tooltip:!0},d):void 0,c.text&&""!=c.text?React.createElement(FormText,null,c.text):void 0)}}]),b}(Field),_temp))||_class;export{ComboBox as default};Field.propTypes={valueField:PropTypes.any,displayField:PropTypes.any,inputName:PropTypes.string.required,options:PropTypes.any};