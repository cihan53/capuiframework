var _class,_class2,_temp;function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:_assertThisInitialized(a)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}import React from"react";import*as ReactDOM from"react-dom";import{observer}from"mobx-react/index";import PropTypes from"prop-types";import Utils from"../Utils/Utils";import Panel from"../Panel/Panel";import{Button,Form}from"reactstrap";import Validator from"../Utils/Validator";import{Xtypes}from"../../../Initialization";let FormPanel=observer(_class=(_temp=_class2=function(a){function b(a){var c;return _classCallCheck(this,b),c=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a)),c.key=c.props.key||Utils.ShortId.generate(),c.submit=c.submit.bind(_assertThisInitialized(c)),c.getValues=c.getValues.bind(_assertThisInitialized(c)),c.createItems=c.createItems.bind(_assertThisInitialized(c)),Utils.isEmpty(c.props.config.footer)&&(c.props.config.footer=[React.createElement(Button,{type:"submit",key:c.key+"-save-btn",form:c.props.name},React.createElement("i",{className:"fa fa-dot-circle-o"})," ",Utils.Translate("Save"))]),c.formRef=React.createRef(),c.children=null,c.Validator=Validator,c}return _inherits(b,a),_createClass(b,[{key:"submit",value:function submit(a){a.preventDefault();let b=this.getValues();this.props.onSubmit(b,this)}},{key:"isValid",value:function isValid(){let a=!0,b=this.getValues();if(null!=this.props.store)a=this.props.store.validate(b);else return this.validate(b);return a}},{key:"validate",value:function validate(a,b="default"){this.validator.message(val.name,void 0===a[val.name]?"":a[val.name],val.rule,{message:val.message})}},{key:"getValues",value:function getValues(){let a={};if(null==this.props.store){const b=new FormData(ReactDOM.findDOMNode(this.formRef.current));for(let c of b.entries())a[c[0]]=a[1]}else a=this.props.store.Attributes;return a}},{key:"createItems",value:function createItems(){this.children=this.props.items.map((a,b)=>{if(a.id=this.props.name+"-child-item-"+b,a.key=this.key+"-child-item-"+b,a.store=this.props.store||null,a.layout=this.props.layout||null,a.hasOwnProperty("xtype")){const b=observer(b=>{const c=Xtypes[a.xtype];return React.createElement(c,b)});return React.createElement(b,{p:a})}return Utils.createElement(a)})}},{key:"componentWillMount",value:function componentWillMount(){this.createItems()}},{key:"_renderItem",value:function _renderItem(){const a=new Panel(this.props);return a.render(this.children)}},{key:"render",value:function render(){return React.createElement(Form,{ref:this.formRef,id:this.props.name,name:this.props.name,onSubmit:a=>this.submit(a)},this._renderItem())}}]),b}(React.Component),_class2.defaultProps={name:"form-panel",onSubmit:()=>{},config:{},options:{},optionsBody:{},optionsTitle:{},optionsHeader:{},optionsFooter:{},title:!0,header:"Panel Title",footer:!1,items:[],store:null,xtype:"formpanel",layout:null},_temp))||_class;export{FormPanel as default};FormPanel.propTypes={name:PropTypes.string.isRequired,onSubmit:PropTypes.func.isRequired,config:PropTypes.object.isRequired,title:PropTypes.any,header:PropTypes.any,items:PropTypes.array,options:PropTypes.any,store:PropTypes.any};